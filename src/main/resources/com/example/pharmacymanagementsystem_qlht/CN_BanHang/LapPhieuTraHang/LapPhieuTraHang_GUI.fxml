<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.Pane?>
<?import javafx.scene.text.Font?>

<AnchorPane prefHeight="704.0" prefWidth="1200.0" stylesheets="@../../css/LapPhieuTraHang.css" xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="/com/example/pharmacymanagementsystem_qlht/controller/CN_BanHang/LapPhieuTra/LapPhieuTraHang_Ctrl">
    <children>
        <!-- Tiêu đề -->
        <Label layoutX="40.0" layoutY="21.0" styleClass="title-label" text="LẬP PHIẾU TRẢ HÀNG" />

        <!-- Khu vực tìm kiếm hóa đơn gốc -->
        <Pane layoutX="30.0" layoutY="70.0" prefHeight="70.0" prefWidth="641.0" styleClass="search-pane">
            <children>
                <Label layoutX="20.0" layoutY="20.0" text="Tìm hóa đơn gốc:">
               <font>
                  <Font size="13.0" />
               </font></Label>
                <TextField fx:id="txtTimHoaDon" layoutX="130.0" layoutY="15.0" prefHeight="27.0" prefWidth="391.0" promptText="Nhập mã hóa đơn hoặc tên khách hàng ..." />
                <Button fx:id="btnTimHoaDon" layoutX="573.0" layoutY="16.0" styleClass="primary-btn" text="Tìm" />
            </children>
        </Pane>

        <!-- Hướng dẫn sử dụng -->
        <Label layoutX="40.0" layoutY="150.0" styleClass="hint-label" text="Chọn hóa đơn gốc để bắt đầu trả hàng" />

        <!-- Bảng sản phẩm hóa đơn gốc -->
        <Label layoutX="40.0" layoutY="180.0" styleClass="section-label" text="Sản phẩm trong hóa đơn gốc" />
        <TableView fx:id="tblSanPhamHoaDon" layoutX="40.0" layoutY="210.0" prefHeight="200.0" prefWidth="641.0" styleClass="main-table">
            <columns>
                <TableColumn prefWidth="40.0" text="STT" />
                <TableColumn prefWidth="180.0" text="Tên sản phẩm" />
                <TableColumn prefWidth="80.0" text="Số lượng" />
                <TableColumn prefWidth="60.0" text="Đơn vị" />
                <TableColumn prefWidth="80.0" text="Đơn giá" />
                <TableColumn prefWidth="86.0" text="Chiết khấu" />
                <TableColumn prefWidth="110.0" text="Thành tiền" />
            </columns>
        </TableView>

        <!-- Bảng chi tiết trả hàng -->
        <Label layoutX="40.0" layoutY="437.0" styleClass="section-label" text="Chi tiết trả hàng" />
        <TableView fx:id="tblChiTietTraHang" layoutX="40.0" layoutY="467.0" prefHeight="183.0" prefWidth="641.0" styleClass="main-table">
            <columns>
                <TableColumn prefWidth="40.0" text="STT" />
                <TableColumn prefWidth="180.0" text="Tên sản phẩm" />
                <TableColumn prefWidth="80.0" text="Số lượng trả" />
                <TableColumn prefWidth="60.0" text="Đơn vị" />
                <TableColumn prefWidth="80.0" text="Đơn giá" />
                <TableColumn prefWidth="100.0" text="Thành tiền" />
                <TableColumn prefWidth="120.0" text="Lý do trả" />
                <TableColumn prefWidth="40.0" text="Xóa" />
            </columns>
        </TableView>

        <!-- Thông tin phiếu trả và tổng hợp bên phải -->
        <Pane layoutX="780.0" layoutY="70.0" prefHeight="571.0" prefWidth="391.0" styleClass="info-pane">
            <children>
                <Label layoutX="30.0" layoutY="20.0" text="Mã hóa đơn gốc:" />
                <TextField fx:id="txtMaHoaDonGoc" editable="false" layoutX="209.0" layoutY="14.0" prefWidth="120.0" />

                <Label layoutX="30.0" layoutY="60.0" text="Ngày lập hóa đơn:" />
                <TextField fx:id="txtNgayLapHoaDon" editable="false" layoutX="209.0" layoutY="54.0" prefWidth="120.0" />

                <Label layoutX="30.0" layoutY="110.0" text="Tổng tiền gốc:" />
                <Label fx:id="lblTongTienGoc" layoutX="209.0" layoutY="109.0" styleClass="value-label" text="0 VNĐ" />

                <Label layoutX="30.0" layoutY="150.0" text="Tổng tiền hàng trả lại:" />
                <Label fx:id="lblTongTienTraLai" layoutX="209.0" layoutY="149.0" styleClass="value-label" text="0 VNĐ" />

                <Label layoutX="30.0" layoutY="190.0" text="Thuế (VAT):" />
                <Label fx:id="lblVAT" layoutX="209.0" layoutY="189.0" styleClass="value-label" text="0 VNĐ" />

                <Label layoutX="30.0" layoutY="240.0" styleClass="bold-label" text="Số tiền trả lại:" />
                <Label fx:id="lblSoTienTraLai" layoutX="209.0" layoutY="239.0" styleClass="main-value-label" text="0 VNĐ" />

                <Label layoutX="30.0" layoutY="290.0" text="Ghi chú:" />
                <TextArea fx:id="txtGhiChu" layoutX="100.0" layoutY="285.0" prefHeight="120.0" prefWidth="225.0" />

                <Button fx:id="btnDatHang" layoutX="61.0" layoutY="469.0" prefHeight="44.0" prefWidth="120.0" styleClass="print-btn" text="In phiếu trả">
               <font>
                  <Font size="14.0" />
               </font></Button>
                <Button fx:id="btnThanhToan" layoutX="211.0" layoutY="469.0" prefHeight="44.0" prefWidth="120.0" styleClass="success-btn" text="Trả hàng">
               <font>
                  <Font size="14.0" />
               </font></Button>
            </children>
        </Pane>
    </children>
</AnchorPane>
